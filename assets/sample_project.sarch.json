{
  "schema_version": 1,
  "project_id": "sample-project-001",
  "title": "Sample Trading Pipeline",
  "pages": [
    {
      "page_id": "page-pipeline-main",
      "title": "Main Pipeline",
      "page_type": "PipelineDiagram",
      "plantuml": "@startuml main_pipeline\n\n!theme plain\nskinparam backgroundColor #fefefe\n\ntitle Main Trading Pipeline\n\nrectangle \"Data Sources\" as DATA_SOURCES {\n  component \"Market Data Feed\" as MARKET_FEED\n  component \"Alternative Data\" as ALT_DATA\n}\n\nrectangle \"Processing\" as PROCESSING {\n  component \"Universe Filter\" as UNIVERSE\n  component \"Feature Engine\" as FEATURES\n  component \"Alpha Model\" as ALPHA\n}\n\nrectangle \"Execution\" as EXECUTION {\n  component \"Risk Manager\" as RISK\n  component \"Order Router\" as ROUTER\n  component \"Position Tracker\" as POSITIONS\n}\n\nMARKET_FEED --> UNIVERSE\nALT_DATA --> FEATURES\nUNIVERSE --> FEATURES\nFEATURES --> ALPHA\nALPHA --> RISK\nRISK --> ROUTER\nROUTER --> POSITIONS\n\n@enduml",
      "metadata": {
        "nodes": {
          "MARKET_FEED": {
            "display_name": "Market Data Feed",
            "agent_prompt_text": "Configure the market data feed connection. Supports IEX, Polygon, or custom websocket feeds.",
            "code_refs": ["src/data/market_feed.py"],
            "test_status": "pass",
            "tasks": []
          },
          "ALT_DATA": {
            "display_name": "Alternative Data",
            "agent_prompt_text": "Set up alternative data sources like sentiment, satellite imagery, or web scraping.",
            "code_refs": ["src/data/alt_data.py"],
            "test_status": "not_run",
            "tasks": [
              {"id": "task-1", "title": "Add Twitter sentiment feed", "status": "pending"}
            ]
          },
          "UNIVERSE": {
            "display_name": "Universe Filter",
            "agent_prompt_text": "Define the stock universe filtering criteria: market cap, liquidity, sector constraints.",
            "code_refs": ["src/pipeline/universe.py"],
            "test_status": "pass",
            "tasks": []
          },
          "FEATURES": {
            "display_name": "Feature Engine",
            "agent_prompt_text": "Configure feature engineering pipeline. Add technical indicators, fundamental ratios, or custom features.",
            "code_refs": ["src/pipeline/features.py", "src/pipeline/indicators.py"],
            "test_status": "pass",
            "tasks": []
          },
          "ALPHA": {
            "display_name": "Alpha Model",
            "agent_prompt_text": "Define the alpha generation model. Supports ML models, factor models, or custom scoring.",
            "code_refs": ["src/models/alpha.py"],
            "test_status": "fail",
            "tasks": [
              {"id": "task-2", "title": "Fix model serialization bug", "status": "in_progress"}
            ]
          },
          "RISK": {
            "display_name": "Risk Manager",
            "agent_prompt_text": "Configure risk limits: position sizing, sector exposure, drawdown limits.",
            "code_refs": ["src/execution/risk.py"],
            "test_status": "pass",
            "tasks": []
          },
          "ROUTER": {
            "display_name": "Order Router",
            "agent_prompt_text": "Set up order routing: broker connections, execution algorithms, smart order routing.",
            "code_refs": ["src/execution/router.py"],
            "test_status": "not_run",
            "tasks": []
          },
          "POSITIONS": {
            "display_name": "Position Tracker",
            "agent_prompt_text": "Configure position and P&L tracking, reconciliation with broker.",
            "code_refs": ["src/execution/positions.py"],
            "test_status": "pass",
            "tasks": []
          }
        },
        "edges": {
          "MARKET_FEED->UNIVERSE": {
            "label": "tick data",
            "description": "Real-time market data flows to universe filter"
          },
          "ALPHA->RISK": {
            "label": "signals",
            "description": "Alpha signals pass through risk checks before execution"
          }
        },
        "layout": {
          "MARKET_FEED": {"x": 100, "y": 100},
          "ALT_DATA": {"x": 100, "y": 200},
          "UNIVERSE": {"x": 300, "y": 100},
          "FEATURES": {"x": 300, "y": 200},
          "ALPHA": {"x": 500, "y": 150},
          "RISK": {"x": 700, "y": 100},
          "ROUTER": {"x": 700, "y": 200},
          "POSITIONS": {"x": 700, "y": 300}
        }
      }
    },
    {
      "page_id": "page-infra-config",
      "title": "Infrastructure",
      "page_type": "InfraConfig",
      "plantuml": "@startuml infrastructure\n\n!theme plain\nskinparam backgroundColor #fefefe\n\ntitle Infrastructure Configuration\n\ncloud \"AWS\" as AWS {\n  node \"EC2 Compute\" as EC2 {\n    component \"Trading Engine\" as ENGINE\n    component \"Data Pipeline\" as PIPELINE\n  }\n  \n  database \"RDS PostgreSQL\" as RDS\n  storage \"S3 Data Lake\" as S3\n  queue \"SQS Queues\" as SQS\n}\n\nnode \"On-Premise\" as ONPREM {\n  component \"Market Gateway\" as GATEWAY\n  component \"Order Management\" as OMS\n}\n\nGATEWAY --> ENGINE : market data\nENGINE --> OMS : orders\nENGINE --> RDS : state\nPIPELINE --> S3 : historical data\nENGINE --> SQS : events\n\n@enduml",
      "metadata": {
        "nodes": {
          "ENGINE": {
            "display_name": "Trading Engine",
            "agent_prompt_text": "Configure the main trading engine: instance type, auto-scaling, monitoring.",
            "code_refs": ["infra/terraform/compute.tf"],
            "test_status": "pass",
            "tasks": []
          },
          "PIPELINE": {
            "display_name": "Data Pipeline",
            "agent_prompt_text": "Set up the data ingestion and processing pipeline infrastructure.",
            "code_refs": ["infra/terraform/pipeline.tf"],
            "test_status": "pass",
            "tasks": []
          },
          "RDS": {
            "display_name": "RDS PostgreSQL",
            "agent_prompt_text": "Configure the PostgreSQL database: instance class, storage, backups.",
            "code_refs": ["infra/terraform/database.tf"],
            "test_status": "pass",
            "tasks": []
          },
          "S3": {
            "display_name": "S3 Data Lake",
            "agent_prompt_text": "Set up S3 buckets for historical data storage, lifecycle policies.",
            "code_refs": ["infra/terraform/storage.tf"],
            "test_status": "not_run",
            "tasks": []
          },
          "SQS": {
            "display_name": "SQS Queues",
            "agent_prompt_text": "Configure message queues for async event processing.",
            "code_refs": ["infra/terraform/messaging.tf"],
            "test_status": "pass",
            "tasks": []
          },
          "GATEWAY": {
            "display_name": "Market Gateway",
            "agent_prompt_text": "On-premise market data gateway configuration.",
            "code_refs": ["infra/ansible/gateway.yml"],
            "test_status": "pass",
            "tasks": []
          },
          "OMS": {
            "display_name": "Order Management",
            "agent_prompt_text": "Order management system configuration and broker connections.",
            "code_refs": ["infra/ansible/oms.yml"],
            "test_status": "pass",
            "tasks": []
          }
        },
        "edges": {},
        "layout": {
          "ENGINE": {"x": 200, "y": 100},
          "PIPELINE": {"x": 200, "y": 200},
          "RDS": {"x": 400, "y": 150},
          "S3": {"x": 400, "y": 250},
          "SQS": {"x": 400, "y": 50},
          "GATEWAY": {"x": 50, "y": 100},
          "OMS": {"x": 50, "y": 200}
        }
      }
    },
    {
      "page_id": "page-backtest-sweeps",
      "title": "Backtest Sweeps",
      "page_type": "BacktestSweeps",
      "plantuml": "@startuml backtest_sweeps\n\n!theme plain\nskinparam backgroundColor #fefefe\n\ntitle Backtest Parameter Sweeps\n\nrectangle \"Parameter Space\" as PARAMS {\n  component \"Lookback Windows\" as LOOKBACK\n  component \"Threshold Values\" as THRESHOLDS\n  component \"Model Variants\" as MODELS\n}\n\nrectangle \"Execution\" as EXEC {\n  component \"Sweep Controller\" as CONTROLLER\n  component \"Worker Pool\" as WORKERS\n  component \"Results Collector\" as COLLECTOR\n}\n\nrectangle \"Analysis\" as ANALYSIS {\n  component \"Performance Metrics\" as METRICS\n  component \"Visualization\" as VIZ\n  component \"Report Generator\" as REPORT\n}\n\nLOOKBACK --> CONTROLLER\nTHRESHOLDS --> CONTROLLER\nMODELS --> CONTROLLER\nCONTROLLER --> WORKERS\nWORKERS --> COLLECTOR\nCOLLECTOR --> METRICS\nMETRICS --> VIZ\nMETRICS --> REPORT\n\n@enduml",
      "metadata": {
        "nodes": {
          "LOOKBACK": {
            "display_name": "Lookback Windows",
            "agent_prompt_text": "Define lookback window parameter ranges: [5, 10, 20, 60, 120] days.",
            "test_status": "not_run",
            "tasks": []
          },
          "THRESHOLDS": {
            "display_name": "Threshold Values",
            "agent_prompt_text": "Define threshold parameter ranges for entry/exit signals.",
            "test_status": "not_run",
            "tasks": []
          },
          "MODELS": {
            "display_name": "Model Variants",
            "agent_prompt_text": "Select model variants to test: linear, xgboost, neural.",
            "test_status": "not_run",
            "tasks": []
          },
          "CONTROLLER": {
            "display_name": "Sweep Controller",
            "agent_prompt_text": "Configure the parameter sweep controller: grid search, random search, Bayesian.",
            "code_refs": ["src/backtest/sweep_controller.py"],
            "test_status": "pass",
            "tasks": []
          },
          "WORKERS": {
            "display_name": "Worker Pool",
            "agent_prompt_text": "Configure parallel worker pool for running backtests.",
            "code_refs": ["src/backtest/workers.py"],
            "test_status": "pass",
            "tasks": []
          },
          "COLLECTOR": {
            "display_name": "Results Collector",
            "agent_prompt_text": "Configure results aggregation and storage.",
            "code_refs": ["src/backtest/collector.py"],
            "test_status": "pass",
            "tasks": []
          },
          "METRICS": {
            "display_name": "Performance Metrics",
            "agent_prompt_text": "Define performance metrics: Sharpe, Sortino, max drawdown, win rate.",
            "code_refs": ["src/analysis/metrics.py"],
            "test_status": "pass",
            "tasks": []
          },
          "VIZ": {
            "display_name": "Visualization",
            "agent_prompt_text": "Configure result visualization: heatmaps, equity curves, parameter sensitivity.",
            "code_refs": ["src/analysis/viz.py"],
            "test_status": "not_run",
            "tasks": []
          },
          "REPORT": {
            "display_name": "Report Generator",
            "agent_prompt_text": "Generate PDF/HTML reports for backtest sweep results.",
            "code_refs": ["src/analysis/report.py"],
            "test_status": "not_run",
            "tasks": []
          }
        },
        "edges": {},
        "layout": {}
      }
    }
  ]
}

